(this.webpackJsonpethernote=this.webpackJsonpethernote||[]).push([[0],{120:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(42),c=(n(0),n(155)),a=n(16);function o(e){return Object(a.jsx)(c.a,Object(r.a)(Object(r.a)({},e),{},{borderRadius:"0",bg:"transparent",border:"1px solid black",boxShadow:"4px 4px black",_hover:{boxShadow:"none"},_focus:{},_active:{},children:e.children}))}},241:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return w}));var r=n(97),c=n(122),a=n(2),o=n.n(a),s=n(0),i=n(51),u=n(251),b=n(244),l=n(120),d=n(161),f=n(245),p=n(246),j=n(16),h=n(520),x=n(595),O="",v=null;function w(){var t=Object(s.useState)(!1),n=Object(c.a)(t,2),a=n[0],w=n[1],g=Object(s.useState)(0),m=Object(c.a)(g,2),y=m[0],k=m[1],N=Object(s.useState)(["My First Note"]),C=Object(c.a)(N,2),S=C[0],I=C[1],_=Object(p.create)("https://ipfs.infura.io:5001"),P=function(){var e=Object(r.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum||!window.ethereum.isMetaMask){e.next=8;break}return e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:t=e.sent,M(t[0]),w(!0),e.next=9;break;case 8:console.log("Please Install MetaMask");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O=t,n=new d.a.providers.Web3Provider(window.ethereum),r=n.getSigner(),v=new d.a.Contract("0xf6ea1d9a263bb96b0d22c1689469ee6402590a44",f,r),R();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();window.ethereum&&(window.ethereum.on("accountsChanged",M),window.ethereum.on("chainChanged",(function(){window.location.reload()})));var J=function(){var t=Object(r.a)(o.a.mark((function t(){var n,r,c,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.request({method:"eth_getEncryptionPublicKey",params:[O]});case 2:return n=t.sent,r=h.bufferToHex(e.from(JSON.stringify(x.encrypt({publicKey:n,data:JSON.stringify({notes:S}),version:"x25519-xsalsa20-poly1305"})),"utf8")),t.next=6,_.add(r);case 6:c=t.sent,a=c.cid,s=a.toString(),v.set(s),console.log(s),console.log(r);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=function(){var e=Object(r.a)(o.a.mark((function e(){var t,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get();case 2:if(t=e.sent,console.log(t),"User not found"==t){e.next=16;break}return e.next=7,fetch("https://ipfs.infura.io:5001/api/v0/cat?arg="+t,{method:"POST"});case 7:return n=e.sent,e.next=10,n.text();case 10:return r=e.sent,e.next=13,window.ethereum.request({method:"eth_decrypt",params:[r,O]});case 13:c=e.sent,console.log(c),I(JSON.parse(c).notes);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)(i.b,{bg:"",maxW:"1000px",h:"100%",pt:"15px",children:[Object(j.jsxs)(i.c,{justify:"space-between",align:"flex-end",mb:"10px",children:[Object(j.jsx)(i.a,{p:"3px",border:"1px solid black",boxShadow:"4px 4px black",children:Object(j.jsx)(i.d,{as:"h1",children:"Ethernote"})}),Object(j.jsx)(i.a,{children:a?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(l.a,{onClick:J,mr:"4px",children:"Save All Changes"}),Object(j.jsx)(l.a,{onClick:P,children:O.substring(0,12)})]}):Object(j.jsx)(l.a,{onClick:P,children:"Connect Wallet"})})]}),Object(j.jsxs)(i.c,{bg:"",h:"90%",border:"1px solid black",boxShadow:"6px 6px black",children:[Object(j.jsx)(u.a,{notes:S,setNotes:I,currNoteInd:y,setCurrNoteInd:k}),Object(j.jsx)(b.a,{notes:S,setNotes:I,currNoteInd:y,currNote:S[y]})]}),Object(j.jsx)(i.e,{align:"center",mt:"10px",children:"\xa9 2022 with \u2665 by Gary Peng"})]})}}).call(this,n(14).Buffer)},244:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(55),c=(n(0),n(51)),a=n(156),o=n(16);function s(e){return Object(o.jsx)(c.c,{bg:"",w:"70%",h:"100%",direction:"column",children:Object(o.jsx)(a.a,{value:e.currNote,onChange:function(t){e.setNotes((function(n){var c=Object(r.a)(n);return c[e.currNoteInd]=t.target.value,c}))},w:"100%",h:"100%",borderRadius:"0",border:"null",_focus:{},_hover:{},resize:"none"})})}},245:function(e){e.exports=JSON.parse('[{"inputs":[],"name":"get","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"hash","type":"string"}],"name":"set","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},251:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(55),c=n(42),a=n(0),o=n(164),s=n(51),i=n(155),u=n(252),b=n(119),l=n(16),d=["title"];function f(e){var t=e.title,n=Object(u.a)(e,d),a=Object(o.a)(n),f=(a.state,a.getInputProps),p=a.getCheckboxProps,j=f(),h=p();return Object(l.jsxs)(s.c,Object(c.a)(Object(c.a)({as:"label"},h),{},{cursor:"pointer",border:"1px solid black",_checked:{bg:"black",color:"white",border:null},px:5,py:3,justify:"space-between",children:[Object(l.jsx)("input",Object(c.a)({},j)),t,Object(l.jsx)(i.a,{onClick:function(){var t=parseInt(j.value);t<=e.currNoteInd&&0!=t&&e.setCurrNoteInd(e.currNoteInd-1),e.setNotes((function(e){var n=Object(r.a)(e);return n.splice(t,1),n}))},bg:"transparent",border:null,_hover:{},_focus:{},_active:{},children:Object(l.jsx)(b.b,{})})]}))}function p(e){var t=Object(o.b)({defaultValue:"0",onChange:function(t){return e.setCurrNoteInd(parseInt(t))}}),n=(t.value,t.setValue),u=t.getRootProps,d=t.getRadioProps;Object(a.useEffect)((function(){n(e.currNoteInd+"")}),[e.currNoteInd]);var p=e.notes.map((function(t,n){var r=n.toString(),o=d({value:r}),s=t.substring(0,20).split("\n")[0];return Object(a.createElement)(f,Object(c.a)(Object(c.a)({},e),{},{key:r,title:s},o))}));return Object(l.jsxs)(s.c,Object(c.a)(Object(c.a)({w:"30%",h:"100%",direction:"column",overflowY:"auto",borderRight:"1px solid black"},u()),{},{children:[p,Object(l.jsx)(i.a,{onClick:function(){var t=e.notes.length;e.setNotes((function(e){var t=Object(r.a)(e);return t.push("New Note"),t})),e.setCurrNoteInd(t)},borderRadius:"0",bg:"transparent",border:null,_hover:{},_focus:{},_active:{},children:Object(l.jsx)(b.a,{})})]}))}},289:function(e,t,n){},356:function(e,t){},518:function(e,t){},522:function(e,t){},524:function(e,t){},531:function(e,t){},532:function(e,t){},556:function(e,t){},558:function(e,t){},568:function(e,t){},570:function(e,t){},583:function(e,t){},585:function(e,t){},616:function(e,t){},619:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(94),o=n.n(a),s=(n(289),n(71)),i=n(241),u=n(16);var b=function(){return Object(u.jsx)(s.a,{children:Object(u.jsx)(i.a,{})})};o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(b,{})}),document.getElementById("root"))}},[[619,1,2]]]);
//# sourceMappingURL=main.aedd85e8.chunk.js.map